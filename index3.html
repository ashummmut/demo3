<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About Us - Ankii's Special Site</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ffecf1 0%, #fef9fb 100%);
      min-height: 100vh;
      margin: 0;
    }
    .lovely-box {
      background: #ffe4e6;
      box-shadow: 0 8px 20px rgb(255 182 193 / 0.3);
    }
    .btn-fancy {
      background: #ec4899;
      color: white;
      font-weight: 600;
      padding: 0.5rem 1.25rem;
      border-radius: 9999px;
      box-shadow: 0 4px 14px rgb(236 72 153 / 0.45);
      transition: all 0.25s ease;
      user-select: none;
    }
    .btn-fancy:hover {
      background: #db2777;
      box-shadow: 0 6px 18px rgb(219 39 119 / 0.65);
    }
    .cube-wrapper {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      perspective: 1500px;
      z-index: 9999;
    }
    .cube {
      width: 280px;
      height: 280px;
      transform-style: preserve-3d;
      animation: rotateCube 7s linear forwards;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(145deg, #f8bbd0, #f48fb1);
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
    }
    .cube-face {
      width: 100%;
      height: 100%;
      border-radius: 20px;
      overflow: hidden;
      transform: translateZ(100px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    .cube-face img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    @keyframes rotateCube {
      0% { transform: rotateX(30deg) rotateY(0deg); opacity: 0; }
      30% { opacity: 1; }
      100% { transform: rotateX(30deg) rotateY(360deg); opacity: 0; }
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>
<body>

<div id="responseBanner" class="hidden bg-green-100 text-green-800 px-4 py-2 text-center font-medium w-full mb-4 rounded-xl fixed top-0 left-0 z-50"></div>

<main class="max-w-4xl mx-auto px-4 py-12">
  <header class="text-center mb-12">
    <h1 class="text-4xl font-extrabold text-pink-600 mb-2">About Us</h1>
    <p class="text-pink-400">Welcome to your special space, Ankii!</p>
  </header>

  <section id="envelopeSection" class="relative mx-auto max-w-md cursor-pointer select-none group" title="Click to open envelope"
    style="background-color: #ffe0ec; border-radius: 12px; width: 220px; height: 160px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; box-shadow: 0 6px 18px rgb(255, 182, 182);">
    <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Envelope" class="absolute w-48 z-0" style="filter: hue-rotate(300deg) saturate(2);" />
    <img src="https://i.imgur.com/wF9lWaY.png" id="teddyBear" alt="Red Teddy" class="absolute w-24 transition-all duration-700 ease-out -bottom-20 opacity-0 group-hover:opacity-100" />
  </section>

  <p class="text-center text-pink-500 mt-2 italic">Click the envelope to see your message</p>

  <div id="sorryModal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-3xl max-w-xs text-center shadow-lg animate-fadeIn">
      <h3 class="text-xl font-bold text-pink-600 mb-4">Did you accept my sorry? ğŸ™ˆ</h3>
      <div class="flex justify-center gap-6">
        <button class="btn-fancy" onclick="handleSorryResponse(true)">Yes ğŸ˜Š</button>
        <button class="btn-fancy bg-gray-400 hover:bg-gray-500" onclick="handleSorryResponse(false)">Nope ğŸ˜’</button>
      </div>
    </div>
  </div>

  <section class="max-w-xl mx-auto my-16 bg-pink-50 p-6 rounded-2xl shadow-xl text-center">
    <h2 class="text-3xl font-bold text-pink-700 mb-3">ğŸŒ¨ï¸ The Shimla Dream Project ğŸŒ¨ï¸</h2>
    <p class="text-pink-600 text-base mb-4">Because whatâ€™s better than mountains, momos, and Ankii wrapped in 3 layers of sweaters?</p>
    <button onclick="launchShimlaQuestion()" class="btn-fancy">Wanna Hear the Plan? ğŸ˜„</button>
  </section>

  <section class="text-center my-10">
    <button onclick="handleLikeClick()" class="btn-fancy text-xl relative">ğŸ‰ What We Like</button>
  </section>

  <section class="flex flex-col items-center justify-center my-10">
    <h2 class="text-2xl font-bold text-pink-600 mb-4">Wanna Talk? ğŸ“</h2>
    <a href="https://wa.me/919508812525" target="_blank" class="btn-fancy inline-block">Start a WhatsApp Video Call ğŸ’¬</a>
    <p class="text-sm text-gray-500 mt-2">*Link opens in WhatsApp â€” make sure Ankii is online ğŸ˜‰</p>
  </section>

  <section class="text-center my-8">
    <a href="chat.html" class="btn-fancy">Open Cute Chat ğŸ’Œ</a>
  </section>

  <p class="text-sm text-gray-600 text-center mb-10">Letâ€™s plan something magical this time ğŸ˜‡</p>

  <section class="max-w-2xl mx-auto my-10 lovely-box p-6 rounded-xl">
    <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Your Thoughts ğŸ’¬</h2>
    <textarea id="commentInput" rows="4" placeholder="Write something fun or sassy here ğŸ˜œ..." class="w-full p-3 rounded-xl border border-pink-300 resize-none"></textarea>
    <button onclick="saveComment()" class="btn-fancy mt-3">Post Review</button>
    <div id="commentsDisplay" class="mt-4 space-y-2 text-left"></div>
  </section>

  <section class="text-center mt-12 mb-20 text-pink-600 font-semibold text-lg" id="bdayCounter" aria-live="polite"></section>
</main>

<audio id="ambientMusic" src="https://cdn.pixabay.com/download/audio/2021/09/21/audio_7f9276a907.mp3" loop></audio>
<audio id="fireSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_57770d5d4a.mp3"></audio>
<audio id="popSound" src="https://cdn.pixabay.com/download/audio/2021/09/02/audio_9a20a32818.mp3"></audio>
<audio id="teddyPop" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2c52d4f3e3.mp3"></audio>
<audio id="welcomeSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2c52d4f3e3.mp3" preload="auto"></audio>

<!-- 3D Cuboid Girl -->
<div id="girlCubeWrapper" class="cube-wrapper hidden">
  <div class="cube"><div class="cube-face"><img src="girl1.jpg" alt="Welcome Cutie" /></div></div>
</div>
<div id="welcomeMessage" class="fixed top-20 w-full text-center text-3xl font-bold text-pink-600 hidden z-50">Welcome cutie ğŸ’–</div>

<script>
// Auth check
(function () {
  if (localStorage.getItem('auth') !== 'true') {
    const username = prompt('Enter username:');
    const password = prompt('Enter password:');
    if (username !== 'funny' || password !== 'ankii') {
      document.body.innerHTML = '<div style="text-align:center; margin-top:100px;"><h1>ğŸš« Access Denied</h1></div>';
      throw new Error('Unauthorized');
    }
    localStorage.setItem('auth', 'true');
    alert(`Welcome, ${username}!`);
  }
})();

const firebaseConfig = {
  apiKey: "AIzaSyAxbhImy3IX3pYzE4D5U7RR9UydFQ0u_1s",
  authDomain: "sorry-project-b9cdb.firebaseapp.com",
  databaseURL: "https://sorry-project-b9cdb-default-rtdb.firebaseio.com",
  projectId: "sorry-project-b9cdb",
  storageBucket: "sorry-project-b9cdb.appspot.com",
  messagingSenderId: "318164831374",
  appId: "1:318164831374:web:fb2d74c8c041e44ed33213"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Teddy + Sorry modal
document.getElementById('envelopeSection').addEventListener('click', () => {
  const teddy = document.getElementById('teddyBear');
  const sound = document.getElementById('teddyPop');
  teddy.style.bottom = '30px';
  teddy.style.opacity = '1';
  sound.currentTime = 0;
  sound.play();
  for (let i = 0; i < 10; i++) {
    const heart = document.createElement('div');
    heart.textContent = 'ğŸ’–';
    heart.style.position = 'absolute';
    heart.style.left = `${Math.random() * 100}%`;
    heart.style.bottom = '20px';
    heart.style.fontSize = `${Math.random() * 20 + 20}px`;
    heart.style.animation = `rise ${2 + Math.random()}s ease-out forwards`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 3000);
  }
  setTimeout(() => document.getElementById('sorryModal').classList.remove('hidden'), 1200);
});

function handleSorryResponse(accepted) {
  const response = accepted ? 'accepted' : 'not accepted';
  db.ref('sorryResponse').set(response).then(() => {
    document.getElementById('sorryModal').classList.add('hidden');
    updateResponseBanner();
  });
}

function updateResponseBanner() {
  const banner = document.getElementById('responseBanner');
  db.ref('sorryResponse').once('value').then(snapshot => {
    const response = snapshot.val();
    if (response === 'accepted') {
      banner.textContent = 'ğŸŒŸ Ankii accepted your sorry!';
      banner.classList.replace('bg-yellow-100', 'bg-green-100');
      banner.classList.replace('text-yellow-800', 'text-green-800');
    } else if (response === 'not accepted') {
      banner.textContent = 'â³ Still waiting for forgiveness...';
      banner.classList.replace('bg-green-100', 'bg-yellow-100');
      banner.classList.replace('text-green-800', 'text-yellow-800');
    }
    banner.classList.remove('hidden');
  });
}

function handleLikeClick() {
  window.location.href = "likes.html";
}

function saveComment() {
  const val = document.getElementById('commentInput').value.trim();
  if (!val) return alert('Write something first!');
  const newComment = { text: val, time: new Date().toLocaleString() };
  const key = Date.now();
  db.ref(`comments/${key}`).set(newComment);
  document.getElementById('commentInput').value = '';
  renderComments();
}

function renderComments() {
  const div = document.getElementById('commentsDisplay');
  db.ref('comments').once('value').then(snapshot => {
    const data = snapshot.val() || {};
    const sorted = Object.values(data).sort((a, b) => new Date(a.time) - new Date(b.time));
    div.innerHTML = sorted.map(c => `<div class="p-3 bg-pink-50 rounded-xl shadow-sm"><p class="text-pink-800">${c.text}</p><p class="text-xs text-gray-400 text-right mt-1">${c.time}</p></div>`).join('');
  });
}

function updateBirthdayCountdown() {
  const el = document.getElementById('bdayCounter');
  const now = new Date();
  let bday = new Date(now.getFullYear(), 1, 4);
  if (now > bday) bday.setFullYear(now.getFullYear() + 1);
  const diff = Math.ceil((bday - now) / (1000 * 60 * 60 * 24));
  el.textContent = `ğŸ‚ ${diff} days until Ankii's Birthday!`;
}

function showGirlAnimation() {
  const wrapper = document.getElementById('girlCubeWrapper');
  const message = document.getElementById('welcomeMessage');
  const sound = document.getElementById('welcomeSound');
  wrapper.classList.remove('hidden');
  message.classList.remove('hidden');
  sound.currentTime = 0;
  sound.play();
  setTimeout(() => {
    wrapper.classList.add('hidden');
    message.classList.add('hidden');
  }, 7000);
}

window.addEventListener('load', () => {
  renderComments();
  updateResponseBanner();
  updateBirthdayCountdown();
  showGirlAnimation();
  document.querySelectorAll('button').forEach(btn => btn.addEventListener('click', showGirlAnimation));
});
</script>

</body>
</html>
